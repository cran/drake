<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="William Michael Landau" />

<meta name="date" content="2017-09-01" />

<title>Quickstart</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Quickstart</h1>
<h3 class="subtitle"><em>quickstart example for drake</em></h3>
<h4 class="author"><em>William Michael Landau</em></h4>
<h4 class="date"><em>2017-09-01</em></h4>



<div class="figure">
<img src="data:image/png;base64,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" />

</div>
<div id="quick-examples" class="section level1">
<h1>Quick examples</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(drake)
<span class="kw">load_basic_example</span>() <span class="co"># Also (over)writes report.Rmd. `example_drake(&quot;basic&quot;)`, `vignette(&quot;quickstart&quot;)`.</span>
<span class="kw">plot_graph</span>(my_plan) <span class="co"># Hover, click, drag, zoom, pan. Try file = &quot;graph.html&quot; and targets_only = TRUE.</span>
<span class="kw">make</span>(my_plan) <span class="co"># Run the workflow.</span>
<span class="kw">make</span>(my_plan) <span class="co"># Check that everything is already up to date.</span></code></pre></div>
<p>Dive deeper into the built-in examples.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">example_drake</span>(<span class="st">&quot;basic&quot;</span>) <span class="co"># Write the code files.</span>
<span class="kw">examples_drake</span>() <span class="co"># List the other examples.</span>
<span class="kw">vignette</span>(<span class="st">&quot;quickstart&quot;</span>) <span class="co"># Same as https://cran.r-project.org/package=drake/vignettes/quickstart.html</span></code></pre></div>
</div>
<div id="useful-functions" class="section level1">
<h1>Useful functions</h1>
<p>Besides <code>make()</code>, here are some useful functions to learn about drake,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load_basic_example</span>()
<span class="kw">drake_tip</span>()
<span class="kw">examples_drake</span>()
<span class="kw">example_drake</span>()</code></pre></div>
<p>set up your workflow plan,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plan</span>()
<span class="kw">analyses</span>()
<span class="kw">summaries</span>()
<span class="kw">evaluate</span>()
<span class="kw">expand</span>()
<span class="kw">gather</span>()
<span class="kw">wildcard</span>() <span class="co"># from the wildcard package</span></code></pre></div>
<p>explore the dependency network,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">outdated</span>()
<span class="kw">missed</span>()
<span class="kw">plot_graph</span>()
<span class="kw">dataframes_graph</span>()
<span class="kw">render_graph</span>()
<span class="kw">read_graph</span>()
<span class="kw">deps</span>()
<span class="kw">tracked</span>()</code></pre></div>
<p>interact with the cache,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">clean</span>()
<span class="kw">cached</span>()
<span class="kw">imported</span>()
<span class="kw">built</span>()
<span class="kw">build_times</span>()
<span class="kw">readd</span>()
<span class="kw">loadd</span>()
<span class="kw">find_project</span>()
<span class="kw">find_cache</span>()</code></pre></div>
<p>debug your work,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">check</span>()
<span class="kw">session</span>()
<span class="kw">in_progress</span>()
<span class="kw">progress</span>()
<span class="kw">config</span>()
<span class="kw">read_config</span>()</code></pre></div>
<p>and speed up your project with parallel computing.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">make</span>() <span class="co"># with jobs &gt; 2</span>
<span class="kw">max_useful_jobs</span>()
<span class="kw">parallelism_choices</span>()
<span class="kw">shell_file</span>()</code></pre></div>
</div>
<div id="setting-up-the-basic-example" class="section level1">
<h1>Setting up the basic example</h1>
<p>Let’s establish the building blocks of a data analysis workflow.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(knitr)
<span class="kw">library</span>(drake)</code></pre></div>
<p>First, we will generate a few datasets.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">simulate =<span class="st"> </span>function(n){
  <span class="kw">data.frame</span>(
    <span class="dt">x =</span> stats::<span class="kw">rnorm</span>(n), <span class="co"># Drake tracks calls like `pkg::fn()` (namespaced functions).</span>
    <span class="dt">y =</span> <span class="kw">rpois</span>(n, <span class="dv">1</span>)
  )
}</code></pre></div>
<p>Then, we will analyze each dataset with multiple analysis methods.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg1 =<span class="st"> </span>function(d){
  <span class="kw">lm</span>(y ~<span class="st"> </span>+<span class="st"> </span>x, <span class="dt">data =</span> d)
}

reg2 =<span class="st"> </span>function(d){
  d$x2 =<span class="st"> </span>d$x^<span class="dv">2</span>
  <span class="kw">lm</span>(y ~<span class="st"> </span>x2, <span class="dt">data =</span> d)
}</code></pre></div>
<p>Finally, we will generate a <a href="http://rmarkdown.rstudio.com/">dynamic report</a> to display results.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_knit =<span class="st"> </span>function(file, ...){
  <span class="kw">knit</span>(file)
}</code></pre></div>
<p>We need the source file <code>report.Rmd</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lines =<span class="st"> </span><span class="kw">c</span>(
  <span class="st">&quot;---&quot;</span>,
  <span class="st">&quot;title: Example Report&quot;</span>,
  <span class="st">&quot;author: You&quot;</span>,
  <span class="st">&quot;output: html_document&quot;</span>,
  <span class="st">&quot;---&quot;</span>,
  <span class="st">&quot;&quot;</span>,
  <span class="st">&quot;Look how I read outputs from the drake cache.&quot;</span>,
  <span class="st">&quot;&quot;</span>,
  <span class="st">&quot;```{r example_chunk}&quot;</span>,
  <span class="st">&quot;library(drake)&quot;</span>,
  <span class="st">&quot;readd(small)&quot;</span>,
  <span class="st">&quot;readd(coef_regression2_small)&quot;</span>, <span class="co"># Return an object from the drake cache.</span>
  <span class="st">&quot;loadd(large)&quot;</span>, <span class="co"># Load an object from the drake cache into your workspace.</span>
  <span class="st">&quot;head(large)&quot;</span>,
  <span class="st">&quot;```&quot;</span>)
<span class="kw">writeLines</span>(lines, <span class="st">&quot;report.Rmd&quot;</span>)</code></pre></div>
</div>
<div id="workflow-plan" class="section level1">
<h1>Workflow plan</h1>
<p>The workflow plan lists the intermediate steps of your project.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load_basic_example</span>()
my_plan</code></pre></div>
<pre><code>##                    target                                      command
## 1             'report.md'   my_knit('report.Rmd', report_dependencies)
## 2                   small                                  simulate(5)
## 3                   large                                 simulate(50)
## 4     report_dependencies      c(small, large, coef_regression2_small)
## 5       regression1_small                                  reg1(small)
## 6       regression1_large                                  reg1(large)
## 7       regression2_small                                  reg2(small)
## 8       regression2_large                                  reg2(large)
## 9  summ_regression1_small suppressWarnings(summary(regression1_small))
## 10 summ_regression1_large suppressWarnings(summary(regression1_large))
## 11 summ_regression2_small suppressWarnings(summary(regression2_small))
## 12 summ_regression2_large suppressWarnings(summary(regression2_large))
## 13 coef_regression1_small                      coef(regression1_small)
## 14 coef_regression1_large                      coef(regression1_large)
## 15 coef_regression2_small                      coef(regression2_small)
## 16 coef_regression2_large                      coef(regression2_large)</code></pre>
<p>Each row is an intermediate step, and each <strong>command</strong> generates a <strong>target</strong>. A target is an output R object (cached when generated) or output file (specified with single quotes), and a command just an ordinary piece of R code (not necessarily a single function call). As input, commands may take objects imported from your workspace, targets generated by other commands, or initial input files. These dependencies give your project an underlying network.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Hover, click, drag, zoom, and pan.</span>
<span class="kw">plot_graph</span>(my_plan, <span class="dt">width =</span> <span class="st">&quot;100%&quot;</span>, <span class="dt">height =</span> <span class="st">&quot;500px&quot;</span>) 
<span class="co"># See also dataframes_graph(), render_graph().</span>
<span class="co"># Speed up regraphing with config().</span></code></pre></div>
<iframe src="https://cdn.rawgit.com/wlandau-lilly/drake/a816f791/images/outdated.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
<p>You can also check the dependencies of individual targets.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">deps</span>(reg2)</code></pre></div>
<pre><code>## [1] &quot;lm&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">deps</span>(my_plan$command[<span class="dv">1</span>]) <span class="co"># report.Rmd is single-quoted because it is a file dependency.</span></code></pre></div>
<pre><code>## [1] &quot;'report.Rmd'&quot;        &quot;my_knit&quot;             &quot;report_dependencies&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">deps</span>(my_plan$command[<span class="dv">16</span>])</code></pre></div>
<pre><code>## [1] &quot;coef&quot;              &quot;regression2_large&quot;</code></pre>
<p>List all the reproducibly-tracked objects and files, including imports and targets.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tracked</span>(my_plan, <span class="dt">targets =</span> <span class="st">&quot;small&quot;</span>)</code></pre></div>
<pre><code>## Unloading targets from environment:
##   report_dependencies</code></pre>
<pre><code>## [1] &quot;small&quot;        &quot;simulate&quot;     &quot;data.frame&quot;   &quot;rpois&quot;       
## [5] &quot;stats::rnorm&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tracked</span>(my_plan)</code></pre></div>
<pre><code>##  [1] &quot;'report.md'&quot;            &quot;small&quot;                 
##  [3] &quot;large&quot;                  &quot;report_dependencies&quot;   
##  [5] &quot;regression1_small&quot;      &quot;regression1_large&quot;     
##  [7] &quot;regression2_small&quot;      &quot;regression2_large&quot;     
##  [9] &quot;summ_regression1_small&quot; &quot;summ_regression1_large&quot;
## [11] &quot;summ_regression2_small&quot; &quot;summ_regression2_large&quot;
## [13] &quot;coef_regression1_small&quot; &quot;coef_regression1_large&quot;
## [15] &quot;coef_regression2_small&quot; &quot;coef_regression2_large&quot;
## [17] &quot;reg1&quot;                   &quot;reg2&quot;                  
## [19] &quot;simulate&quot;               &quot;my_knit&quot;               
## [21] &quot;'report.Rmd'&quot;           &quot;c&quot;                     
## [23] &quot;summary&quot;                &quot;suppressWarnings&quot;      
## [25] &quot;coef&quot;                   &quot;lm&quot;                    
## [27] &quot;data.frame&quot;             &quot;rpois&quot;                 
## [29] &quot;stats::rnorm&quot;           &quot;knit&quot;</code></pre>
<p>Check for cycles, missing input files, and other pitfalls.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">check</span>(my_plan)</code></pre></div>
</div>
<div id="generate-the-workflow-plan" class="section level1">
<h1>Generate the workflow plan</h1>
<p>The data frame <code>my_plan</code> would be a pain to write by hand, so <code>drake</code> has functions to help you.</p>
<div id="my_plan" class="section level2">
<h2>my_plan</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_datasets =<span class="st"> </span><span class="kw">plan</span>(
  <span class="dt">small =</span> <span class="kw">simulate</span>(<span class="dv">5</span>),
  <span class="dt">large =</span> <span class="kw">simulate</span>(<span class="dv">50</span>))
my_datasets</code></pre></div>
<pre><code>##   target      command
## 1  small  simulate(5)
## 2  large simulate(50)</code></pre>
<p>For multiple replicates:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">expand</span>(my_datasets, <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;rep1&quot;</span>, <span class="st">&quot;rep2&quot;</span>))</code></pre></div>
<pre><code>##       target      command
## 1 small_rep1  simulate(5)
## 2 small_rep2  simulate(5)
## 3 large_rep1 simulate(50)
## 4 large_rep2 simulate(50)</code></pre>
<p>Each dataset is analyzed multiple ways.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">methods =<span class="st"> </span><span class="kw">plan</span>(
  <span class="dt">regression1 =</span> <span class="kw">reg1</span>(..dataset..),
  <span class="dt">regression2 =</span> <span class="kw">reg2</span>(..dataset..))
methods</code></pre></div>
<pre><code>##        target           command
## 1 regression1 reg1(..dataset..)
## 2 regression2 reg2(..dataset..)</code></pre>
<p>We evaluate the <code>..dataset..</code> wildcard.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_analyses =<span class="st"> </span><span class="kw">analyses</span>(methods, <span class="dt">data =</span> my_datasets)
my_analyses</code></pre></div>
<pre><code>##              target     command
## 1 regression1_small reg1(small)
## 2 regression1_large reg1(large)
## 3 regression2_small reg2(small)
## 4 regression2_large reg2(large)</code></pre>
<p>Next, we summarize each analysis of each dataset using summary statistics and regression coefficients.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">summary_types =<span class="st"> </span><span class="kw">plan</span>(
  <span class="dt">summ =</span> <span class="kw">suppressWarnings</span>(<span class="kw">summary</span>(..analysis..)), <span class="co"># Occasionally there is a perfect regression fit.</span>
  <span class="dt">coef =</span> <span class="kw">coef</span>(..analysis..))
summary_types</code></pre></div>
<pre><code>##   target                                 command
## 1   summ suppressWarnings(summary(..analysis..))
## 2   coef                      coef(..analysis..)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">results =<span class="st"> </span><span class="kw">summaries</span>(summary_types, <span class="dt">analyses =</span> my_analyses, 
  <span class="dt">datasets =</span> my_datasets, <span class="dt">gather =</span> <span class="ot">NULL</span>)
results</code></pre></div>
<pre><code>##                   target                                      command
## 1 summ_regression1_small suppressWarnings(summary(regression1_small))
## 2 summ_regression1_large suppressWarnings(summary(regression1_large))
## 3 summ_regression2_small suppressWarnings(summary(regression2_small))
## 4 summ_regression2_large suppressWarnings(summary(regression2_large))
## 5 coef_regression1_small                      coef(regression1_small)
## 6 coef_regression1_large                      coef(regression1_large)
## 7 coef_regression2_small                      coef(regression2_small)
## 8 coef_regression2_large                      coef(regression2_large)</code></pre>
<p>The <code>gather</code> feature groups summaries into a smaller number of more manageable targets. I shut it off here to make the data frames more readable.</p>
<p>For the dynamic report, we have to declare the dependencies manually.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">load_in_report =<span class="st"> </span><span class="kw">plan</span>(
  <span class="dt">report_dependencies =</span> <span class="kw">c</span>(small, large, coef_regression2_small))
load_in_report</code></pre></div>
<pre><code>##                target                                 command
## 1 report_dependencies c(small, large, coef_regression2_small)</code></pre>
<p>Remember: use single quotes for file dependencies. The functions <code>quotes()</code>, <code>unquote()</code>, and <code>strings()</code> from the <code>eply</code> package may help. Also, please be aware that drake cannot track entire directories/folders.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">report =<span class="st"> </span><span class="kw">plan</span>(
  <span class="dt">report.md =</span> <span class="kw">my_knit</span>(<span class="st">'report.Rmd'</span>, report_dependencies),
  <span class="dt">file_targets =</span> <span class="ot">TRUE</span>, <span class="dt">strings_in_dots =</span> <span class="st">&quot;filenames&quot;</span>)
report</code></pre></div>
<pre><code>##        target                                    command
## 1 'report.md' my_knit('report.Rmd', report_dependencies)</code></pre>
<p>Finally, gather your workflow together with <code>rbind()</code>. Row order does not matter.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_plan =<span class="st"> </span><span class="kw">rbind</span>(report, my_datasets, load_in_report, my_analyses, results)
my_plan</code></pre></div>
<pre><code>##                    target                                      command
## 1             'report.md'   my_knit('report.Rmd', report_dependencies)
## 2                   small                                  simulate(5)
## 3                   large                                 simulate(50)
## 4     report_dependencies      c(small, large, coef_regression2_small)
## 5       regression1_small                                  reg1(small)
## 6       regression1_large                                  reg1(large)
## 7       regression2_small                                  reg2(small)
## 8       regression2_large                                  reg2(large)
## 9  summ_regression1_small suppressWarnings(summary(regression1_small))
## 10 summ_regression1_large suppressWarnings(summary(regression1_large))
## 11 summ_regression2_small suppressWarnings(summary(regression2_small))
## 12 summ_regression2_large suppressWarnings(summary(regression2_large))
## 13 coef_regression1_small                      coef(regression1_small)
## 14 coef_regression1_large                      coef(regression1_large)
## 15 coef_regression2_small                      coef(regression2_small)
## 16 coef_regression2_large                      coef(regression2_large)</code></pre>
</div>
<div id="flexible-helpers-to-make-workflow-plans" class="section level2">
<h2>Flexible helpers to make workflow plans</h2>
<p>If your workflow does not fit the rigid datasets/analyses/summaries framework, check out functions <code>expand()</code>, <code>evaluate()</code>, and <code>gather()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df =<span class="st"> </span><span class="kw">plan</span>(<span class="dt">data =</span> <span class="kw">simulate</span>(<span class="dt">center =</span> MU, <span class="dt">scale =</span> SIGMA))
df</code></pre></div>
<pre><code>##   target                              command
## 1   data simulate(center = MU, scale = SIGMA)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df =<span class="st"> </span><span class="kw">expand</span>(df, <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;rep1&quot;</span>, <span class="st">&quot;rep2&quot;</span>))
df</code></pre></div>
<pre><code>##      target                              command
## 1 data_rep1 simulate(center = MU, scale = SIGMA)
## 2 data_rep2 simulate(center = MU, scale = SIGMA)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">evaluate</span>(df, <span class="dt">wildcard =</span> <span class="st">&quot;MU&quot;</span>, <span class="dt">values =</span> <span class="dv">1</span>:<span class="dv">2</span>)</code></pre></div>
<pre><code>##        target                             command
## 1 data_rep1_1 simulate(center = 1, scale = SIGMA)
## 2 data_rep1_2 simulate(center = 2, scale = SIGMA)
## 3 data_rep2_1 simulate(center = 1, scale = SIGMA)
## 4 data_rep2_2 simulate(center = 2, scale = SIGMA)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">evaluate</span>(df, <span class="dt">wildcard =</span> <span class="st">&quot;MU&quot;</span>, <span class="dt">values =</span> <span class="dv">1</span>:<span class="dv">2</span>, <span class="dt">expand =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>##      target                             command
## 1 data_rep1 simulate(center = 1, scale = SIGMA)
## 2 data_rep2 simulate(center = 2, scale = SIGMA)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">evaluate</span>(df, <span class="dt">rules =</span> <span class="kw">list</span>(<span class="dt">MU =</span> <span class="dv">1</span>:<span class="dv">2</span>, <span class="dt">SIGMA =</span> <span class="kw">c</span>(<span class="fl">0.1</span>, <span class="dv">1</span>)), <span class="dt">expand =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>##      target                           command
## 1 data_rep1 simulate(center = 1, scale = 0.1)
## 2 data_rep2   simulate(center = 2, scale = 1)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">evaluate</span>(df, <span class="dt">rules =</span> <span class="kw">list</span>(<span class="dt">MU =</span> <span class="dv">1</span>:<span class="dv">2</span>, <span class="dt">SIGMA =</span> <span class="kw">c</span>(<span class="fl">0.1</span>, <span class="dv">1</span>, <span class="dv">10</span>)))</code></pre></div>
<pre><code>##             target                           command
## 1  data_rep1_1_0.1 simulate(center = 1, scale = 0.1)
## 2    data_rep1_1_1   simulate(center = 1, scale = 1)
## 3   data_rep1_1_10  simulate(center = 1, scale = 10)
## 4  data_rep1_2_0.1 simulate(center = 2, scale = 0.1)
## 5    data_rep1_2_1   simulate(center = 2, scale = 1)
## 6   data_rep1_2_10  simulate(center = 2, scale = 10)
## 7  data_rep2_1_0.1 simulate(center = 1, scale = 0.1)
## 8    data_rep2_1_1   simulate(center = 1, scale = 1)
## 9   data_rep2_1_10  simulate(center = 1, scale = 10)
## 10 data_rep2_2_0.1 simulate(center = 2, scale = 0.1)
## 11   data_rep2_2_1   simulate(center = 2, scale = 1)
## 12  data_rep2_2_10  simulate(center = 2, scale = 10)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gather</span>(df)</code></pre></div>
<pre><code>##   target                                            command
## 1 target list(data_rep1 = data_rep1, data_rep2 = data_rep2)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gather</span>(df, <span class="dt">target =</span> <span class="st">&quot;my_summaries&quot;</span>, <span class="dt">gather =</span> <span class="st">&quot;rbind&quot;</span>)</code></pre></div>
<pre><code>##         target                                             command
## 1 my_summaries rbind(data_rep1 = data_rep1, data_rep2 = data_rep2)</code></pre>
</div>
</div>
<div id="run-the-workflow" class="section level1">
<h1>Run the workflow</h1>
<p>You may want to check for outdated or missing targets/imports first.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">outdated</span>(my_plan, <span class="dt">verbose =</span> <span class="ot">FALSE</span>) <span class="co"># These are the targets that need to be (re)built.</span></code></pre></div>
<pre><code>##  [1] &quot;'report.md'&quot;            &quot;coef_regression1_large&quot;
##  [3] &quot;coef_regression1_small&quot; &quot;coef_regression2_large&quot;
##  [5] &quot;coef_regression2_small&quot; &quot;large&quot;                 
##  [7] &quot;regression1_large&quot;      &quot;regression1_small&quot;     
##  [9] &quot;regression2_large&quot;      &quot;regression2_small&quot;     
## [11] &quot;report_dependencies&quot;    &quot;small&quot;                 
## [13] &quot;summ_regression1_large&quot; &quot;summ_regression1_small&quot;
## [15] &quot;summ_regression2_large&quot; &quot;summ_regression2_small&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">missed</span>(my_plan, <span class="dt">verbose =</span> <span class="ot">FALSE</span>) <span class="co"># Make sure nothing is missing from your workspace.</span></code></pre></div>
<p>Then just <code>make(my_plan)</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">make</span>(my_plan)</code></pre></div>
<pre><code>## check 10 items
## import 'report.Rmd'
## import c
## import summary
## import suppressWarnings
## import coef
## import lm
## import data.frame
## import rpois
## import stats::rnorm
## import knit
## check 4 items
## import reg1
## import reg2
## import simulate
## import my_knit
## check 2 items
## target small
## target large
## check 4 items
## target regression1_small
## target regression1_large
## target regression2_small
## target regression2_large
## check 8 items
## target summ_regression1_small
## target summ_regression1_large
## target summ_regression2_small
## target summ_regression2_large
## target coef_regression1_small
## target coef_regression1_large
## target coef_regression2_small
## target coef_regression2_large
## check 1 item
## target report_dependencies
## check 1 item
## target 'report.md'</code></pre>
<p>The non-file dependencies of your last target are already loaded in your workspace.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="st">&quot;report_dependencies&quot;</span> %in%<span class="st"> </span><span class="kw">ls</span>() <span class="co"># Should be TRUE.</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">outdated</span>(my_plan, <span class="dt">verbose =</span> <span class="ot">FALSE</span>) <span class="co"># Everything is up to date.</span>
<span class="kw">build_times</span>(<span class="dt">digits =</span> <span class="dv">4</span>) <span class="co"># How long did it take to make each target?</span></code></pre></div>
<pre><code>##                    target   user system elapsed
## 1             'report.md' 0.018s 0.002s   0.02s
## 2  coef_regression1_large 0.001s     0s  0.001s
## 3  coef_regression1_small     0s     0s      0s
## 4  coef_regression2_large 0.001s     0s      0s
## 5  coef_regression2_small 0.001s     0s  0.001s
## 6                   large 0.001s     0s  0.001s
## 7       regression1_large 0.001s     0s  0.002s
## 8       regression1_small 0.003s     0s  0.003s
## 9       regression2_large 0.002s     0s  0.001s
## 10      regression2_small 0.001s     0s  0.001s
## 11    report_dependencies 0.001s     0s  0.001s
## 12                  small 0.002s     0s  0.002s
## 13 summ_regression1_large 0.001s     0s  0.001s
## 14 summ_regression1_small 0.002s     0s  0.002s
## 15 summ_regression2_large 0.001s     0s  0.001s
## 16 summ_regression2_small 0.001s     0s  0.001s</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Hover, click, drag, zoom, and pan.</span>
<span class="kw">plot_graph</span>(my_plan, <span class="dt">width =</span> <span class="st">&quot;100%&quot;</span>, <span class="dt">height =</span> <span class="st">&quot;500px&quot;</span>) <span class="co"># The red nodes from before turned green.</span>
<span class="co"># dataframes_graph(my_plan) # Get visNetwork nodes and edges so you can</span>
                            <span class="co"># make your own plot with visNetwork or render_graph().</span></code></pre></div>
<iframe src="https://cdn.rawgit.com/wlandau-lilly/drake/a816f791/images/built.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
<p>Use <code>readd()</code> and <code>loadd()</code> to load more targets. (They are cached in the hidden <code>.drake/</code> folder using <a href="https://CRAN.R-project.org/package=storr">storr</a>). Other functions interact and view the cache.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">readd</span>(coef_regression2_large)</code></pre></div>
<pre><code>## (Intercept)          x2 
##   0.5682171   0.2275959</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">loadd</span>(small)
<span class="kw">head</span>(small)</code></pre></div>
<pre><code>##            x y
## 1  0.3461223 2
## 2  1.5181933 1
## 3  0.2383665 0
## 4  1.5992608 2
## 5 -0.1831176 2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(small)
<span class="kw">cached</span>(small, large)</code></pre></div>
<pre><code>## small large 
##  TRUE  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cached</span>()</code></pre></div>
<pre><code>##  [1] &quot;'report.Rmd'&quot;           &quot;'report.md'&quot;           
##  [3] &quot;c&quot;                      &quot;coef&quot;                  
##  [5] &quot;coef_regression1_large&quot; &quot;coef_regression1_small&quot;
##  [7] &quot;coef_regression2_large&quot; &quot;coef_regression2_small&quot;
##  [9] &quot;data.frame&quot;             &quot;knit&quot;                  
## [11] &quot;large&quot;                  &quot;lm&quot;                    
## [13] &quot;my_knit&quot;                &quot;reg1&quot;                  
## [15] &quot;reg2&quot;                   &quot;regression1_large&quot;     
## [17] &quot;regression1_small&quot;      &quot;regression2_large&quot;     
## [19] &quot;regression2_small&quot;      &quot;report_dependencies&quot;   
## [21] &quot;rpois&quot;                  &quot;simulate&quot;              
## [23] &quot;small&quot;                  &quot;stats::rnorm&quot;          
## [25] &quot;summ_regression1_large&quot; &quot;summ_regression1_small&quot;
## [27] &quot;summ_regression2_large&quot; &quot;summ_regression2_small&quot;
## [29] &quot;summary&quot;                &quot;suppressWarnings&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">built</span>()</code></pre></div>
<pre><code>##  [1] &quot;'report.md'&quot;            &quot;coef_regression1_large&quot;
##  [3] &quot;coef_regression1_small&quot; &quot;coef_regression2_large&quot;
##  [5] &quot;coef_regression2_small&quot; &quot;large&quot;                 
##  [7] &quot;regression1_large&quot;      &quot;regression1_small&quot;     
##  [9] &quot;regression2_large&quot;      &quot;regression2_small&quot;     
## [11] &quot;report_dependencies&quot;    &quot;small&quot;                 
## [13] &quot;summ_regression1_large&quot; &quot;summ_regression1_small&quot;
## [15] &quot;summ_regression2_large&quot; &quot;summ_regression2_small&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">imported</span>()</code></pre></div>
<pre><code>##  [1] &quot;'report.Rmd'&quot;     &quot;c&quot;                &quot;coef&quot;            
##  [4] &quot;data.frame&quot;       &quot;knit&quot;             &quot;lm&quot;              
##  [7] &quot;my_knit&quot;          &quot;reg1&quot;             &quot;reg2&quot;            
## [10] &quot;rpois&quot;            &quot;simulate&quot;         &quot;stats::rnorm&quot;    
## [13] &quot;summary&quot;          &quot;suppressWarnings&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw">read_plan</span>())</code></pre></div>
<pre><code>##                target                                    command
## 1         'report.md' my_knit('report.Rmd', report_dependencies)
## 2               small                                simulate(5)
## 3               large                               simulate(50)
## 4 report_dependencies    c(small, large, coef_regression2_small)
## 5   regression1_small                                reg1(small)
## 6   regression1_large                                reg1(large)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># read_graph() # Plots the graph of the workflow you just ran.</span>
<span class="kw">head</span>(<span class="kw">progress</span>()) <span class="co"># See also in_progress()</span></code></pre></div>
<pre><code>##           'report.Rmd'            'report.md'                      c 
##             &quot;finished&quot;             &quot;finished&quot;             &quot;finished&quot; 
##                   coef coef_regression1_large coef_regression1_small 
##             &quot;finished&quot;             &quot;finished&quot;             &quot;finished&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># session(): sessionInfo() of the last call to make()</span>
<span class="kw">progress</span>(large)</code></pre></div>
<pre><code>##      large 
## &quot;finished&quot;</code></pre>
<p>The next time you run <code>make(my_plan)</code>, nothing will be built because drake knows everything is up to date.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">make</span>(my_plan)</code></pre></div>
<pre><code>## check 10 items
## import 'report.Rmd'
## import c
## import summary
## import suppressWarnings
## import coef
## import data.frame
## import rpois
## import stats::rnorm
## import lm
## import knit
## check 4 items
## import simulate
## import reg1
## import reg2
## import my_knit
## check 2 items
## check 4 items
## check 8 items
## check 1 item
## check 1 item</code></pre>
<p>But if you change one of your functions, commands, or other dependencies, drake will update the affected parts of the workflow. Let’s say we want to change the quadratic term to a cubic term in our <code>reg2()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg2 =<span class="st"> </span>function(d){
  d$x3 =<span class="st"> </span>d$x^<span class="dv">3</span>
  <span class="kw">lm</span>(y ~<span class="st"> </span>x3, <span class="dt">data =</span> d)
}</code></pre></div>
<p>The targets depending on <code>reg2()</code> need to be rebuilt and everything else is left alone.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">outdated</span>(my_plan, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## [1] &quot;'report.md'&quot;            &quot;coef_regression2_large&quot;
## [3] &quot;coef_regression2_small&quot; &quot;regression2_large&quot;     
## [5] &quot;regression2_small&quot;      &quot;report_dependencies&quot;   
## [7] &quot;summ_regression2_large&quot; &quot;summ_regression2_small&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Hover, click, drag, zoom, and pan.</span>
<span class="kw">plot_graph</span>(my_plan, <span class="dt">width =</span> <span class="st">&quot;100%&quot;</span>, <span class="dt">height =</span> <span class="st">&quot;500px&quot;</span>)</code></pre></div>
<iframe src="https://cdn.rawgit.com/wlandau-lilly/drake/a816f791/images/reg2.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">make</span>(my_plan)</code></pre></div>
<pre><code>## check 10 items
## import 'report.Rmd'
## import c
## import summary
## import suppressWarnings
## import coef
## import data.frame
## import rpois
## import stats::rnorm
## import lm
## import knit
## check 4 items
## import simulate
## import reg1
## import reg2
## import my_knit
## check 2 items
## check 4 items
## target regression2_small
## target regression2_large
## check 8 items
## target summ_regression2_small
## target summ_regression2_large
## target coef_regression2_small
## target coef_regression2_large
## check 1 item
## target report_dependencies
## check 1 item
## target 'report.md'</code></pre>
<p>But trivial changes to whitespace and comments are totally ignored in your functions and in <code>my_plan$command</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg2 =<span class="st"> </span>function(d){
  d$x3 =<span class="st"> </span>d$x^<span class="dv">3</span>
    <span class="kw">lm</span>(y ~<span class="st"> </span>x3, <span class="dt">data =</span> d) <span class="co"># I indented here.</span>
}
<span class="kw">outdated</span>(my_plan, <span class="dt">verbose =</span> <span class="ot">FALSE</span>) <span class="co"># Everything is up to date.</span></code></pre></div>
<p>Need to add new work on the fly? Just append rows to the workflow plan. If the rest of your workflow is up to date, only the new work is run.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">new_simulation =<span class="st"> </span>function(n){
  <span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="kw">rnorm</span>(n), <span class="dt">y =</span> <span class="kw">rnorm</span>(n))
}

additions =<span class="st"> </span><span class="kw">plan</span>(
  <span class="dt">new_data =</span> <span class="kw">new_simulation</span>(<span class="dv">36</span>) +<span class="st"> </span><span class="kw">sqrt</span>(<span class="dv">10</span>))  
additions</code></pre></div>
<pre><code>##     target                       command
## 1 new_data new_simulation(36) + sqrt(10)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_plan =<span class="st"> </span><span class="kw">rbind</span>(my_plan, additions)
my_plan</code></pre></div>
<pre><code>##                    target                                      command
## 1             'report.md'   my_knit('report.Rmd', report_dependencies)
## 2                   small                                  simulate(5)
## 3                   large                                 simulate(50)
## 4     report_dependencies      c(small, large, coef_regression2_small)
## 5       regression1_small                                  reg1(small)
## 6       regression1_large                                  reg1(large)
## 7       regression2_small                                  reg2(small)
## 8       regression2_large                                  reg2(large)
## 9  summ_regression1_small suppressWarnings(summary(regression1_small))
## 10 summ_regression1_large suppressWarnings(summary(regression1_large))
## 11 summ_regression2_small suppressWarnings(summary(regression2_small))
## 12 summ_regression2_large suppressWarnings(summary(regression2_large))
## 13 coef_regression1_small                      coef(regression1_small)
## 14 coef_regression1_large                      coef(regression1_large)
## 15 coef_regression2_small                      coef(regression2_small)
## 16 coef_regression2_large                      coef(regression2_large)
## 17               new_data                new_simulation(36) + sqrt(10)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">make</span>(my_plan)</code></pre></div>
<pre><code>## check 12 items
## import 'report.Rmd'
## import c
## import summary
## import suppressWarnings
## import coef
## import sqrt
## import data.frame
## import rnorm
## import rpois
## import stats::rnorm
## import lm
## import knit
## check 5 items
## import new_simulation
## import simulate
## import reg1
## import reg2
## import my_knit
## check 3 items
## target new_data
## check 4 items
## check 8 items
## check 1 item
## check 1 item</code></pre>
<p>If you ever need to erase your work, use <code>clean()</code>. Any targets removed from the cache will have to be rebuilt on the next call to <code>make()</code>, so be careful.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">clean</span>(small, reg1) <span class="co"># uncaches individual targets and imported objects</span>
<span class="kw">clean</span>() <span class="co"># cleans all targets out of the cache</span>
<span class="kw">clean</span>(<span class="dt">destroy =</span> <span class="ot">TRUE</span>) <span class="co"># removes the cache entirely</span></code></pre></div>
</div>
<div id="high-performance-computing" class="section level1">
<h1>High-performance computing</h1>
<p>The network graph is the key to drake’s parallel computing.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">clean</span>()
<span class="kw">load_basic_example</span>()
<span class="kw">make</span>(my_plan, <span class="dt">jobs =</span> <span class="dv">2</span>, <span class="dt">verbose =</span> <span class="ot">FALSE</span>) <span class="co"># Parallelize over 2 jobs.</span>
reg2 =<span class="st"> </span>function(d){ <span class="co"># Change a dependency.</span>
  d$x3 =<span class="st"> </span>d$x^<span class="dv">3</span>
  <span class="kw">lm</span>(y ~<span class="st"> </span>x3, <span class="dt">data =</span> d)
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Hover, click, drag, zoom, and pan.</span>
<span class="kw">plot_graph</span>(my_plan, <span class="dt">width =</span> <span class="st">&quot;100%&quot;</span>, <span class="dt">height =</span> <span class="st">&quot;500px&quot;</span>)</code></pre></div>
<iframe src="https://cdn.rawgit.com/wlandau-lilly/drake/a816f791/images/reg2.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
<p>When you call <code>make(my_plan, jobs = 4)</code>, the work proceeds in chronological order from left to right. The items are built or imported column by column in sequence, and up-to-date targets are skipped. Within each column, the targets/objects are all independent of each other conditional on the previous steps, so they are distributed over the 4 available parallel jobs/workers. Assuming the targets are rate-limiting (as opposed to imported objects), the next <code>make(..., jobs = 4)</code> should be faster than <code>make(..., jobs = 1)</code>, but it would be superfluous to use more than 4 jobs.</p>
<p>See function <code>max_useful_jobs()</code> to suggest the number of jobs, taking into account which targets are already up to date. Try out the following in a fresh R session.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(drake)
<span class="kw">load_basic_example</span>()
<span class="kw">plot_graph</span>(my_plan) <span class="co"># Set targets_only to TRUE for smaller graphs.</span>
<span class="kw">max_useful_jobs</span>(my_plan) <span class="co"># 8</span>
<span class="kw">max_useful_jobs</span>(my_plan, <span class="dt">imports =</span> <span class="st">&quot;files&quot;</span>) <span class="co"># 8</span>
<span class="kw">max_useful_jobs</span>(my_plan, <span class="dt">imports =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># 10</span>
<span class="kw">max_useful_jobs</span>(my_plan, <span class="dt">imports =</span> <span class="st">&quot;none&quot;</span>) <span class="co"># 8</span>
<span class="kw">make</span>(my_plan, <span class="dt">jobs =</span> <span class="dv">4</span>)
<span class="kw">plot_graph</span>(my_plan)
<span class="co"># Ignore the targets already built.</span>
<span class="kw">max_useful_jobs</span>(my_plan) <span class="co"># 1</span>
<span class="kw">max_useful_jobs</span>(my_plan, <span class="dt">imports =</span> <span class="st">&quot;files&quot;</span>) <span class="co"># 1</span>
<span class="kw">max_useful_jobs</span>(my_plan, <span class="dt">imports =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># 10</span>
<span class="kw">max_useful_jobs</span>(my_plan, <span class="dt">imports =</span> <span class="st">&quot;none&quot;</span>) <span class="co"># 0</span>
<span class="co"># Change a function so some targets are now out of date.</span>
reg2 =<span class="st"> </span>function(d){
  d$x3 =<span class="st"> </span>d$x^<span class="dv">3</span>
  <span class="kw">lm</span>(y ~<span class="st"> </span>x3, <span class="dt">data =</span> d)
}
<span class="kw">plot_graph</span>(my_plan)
<span class="kw">max_useful_jobs</span>(my_plan) <span class="co"># 4</span>
<span class="kw">max_useful_jobs</span>(my_plan, <span class="dt">imports =</span> <span class="st">&quot;files&quot;</span>) <span class="co"># 4</span>
<span class="kw">max_useful_jobs</span>(my_plan, <span class="dt">imports =</span> <span class="st">&quot;all&quot;</span>) <span class="co"># 10</span>
<span class="kw">max_useful_jobs</span>(my_plan, <span class="dt">imports =</span> <span class="st">&quot;none&quot;</span>) <span class="co"># 4</span></code></pre></div>
<p>As for how the parallelism is implemented, you can choose from multiple built-in backends.</p>
<ol style="list-style-type: decimal">
<li><strong>mclapply</strong>: low-overhead, light-weight. <code>drake::make(my_plan, parallelism = &quot;mclapply&quot;, jobs = 2)</code> invokes <code>parallel::mclapply()</code> under the hood, distributing the work over at most two independent processes (set with <code>jobs</code>). Mclapply is an ideal choice for low-overhead single-node parallelism, but it does not work on Windows.</li>
<li><strong>parLapply</strong>: medium-overhead, light-weight. <code>make(my_plan, parallelism = &quot;parLapply&quot;, jobs = 2)</code> invokes <code>parallel::mclapply()</code> under the hood. This option is similar to mclapply except that it works on Windows and costs a little extra time up front.</li>
<li><strong>Makefile</strong>: high-overhead, heavy-duty. For this one, Windows users need to download and install <a href="https://cran.r-project.org/bin/windows/Rtools/"><code>Rtools</code></a>. For everyone else, just make sure <a href="https://www.gnu.org/software/make/">Make</a> is installed. The build order may be different for <a href="https://www.gnu.org/software/make/">Makefile</a> parallelism because all the imports are imported before any of the targets are built with the <a href="https://www.gnu.org/software/make/">Makefile</a>. That means <code>plot_graph()</code>, <code>dataframes_graph()</code>, and <code>max_useful_jobs()</code> behave differently for .</li>
</ol>
<ul>
<li><code>make(my_plan, parallelism = &quot;Makefile&quot;, jobs = 2)</code> creates a proper <a href="https://www.gnu.org/software/make/">Makefile</a> to distribute the work over multiple independent R sessions.</li>
<li><code>make(my_plan, parallelism = &quot;Makefile&quot;, command = &quot;make&quot;, args = &quot;--jobs=4 --silent&quot;)</code> gives you finer control over the arguments and the program for the <a href="https://www.gnu.org/software/make/">Makefile</a>. For example, you could use <a href="https://www.ibm.com/support/knowledgecenter/en/SSETD4_9.1.2/lsf_command_ref/lsmake.1.html">lsmake</a> instead of <a href="https://www.gnu.org/software/make/">Make</a> itself.</li>
<li><code>make(my_plan, parallelism = &quot;Makefile&quot;, jobs = 2, prepend = &quot;SHELL=./shell.sh&quot;)</code> is similar, but it uses a helper file <code>shell.sh</code> to distribute the R sessions over different jobs/nodes on a cluster. Your <code>shell.sh</code> file should look something like the following, and you can use <code>shell_file()</code> to write an example.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#!/bin/bash</span>
shift
echo <span class="st">&quot;module load R; $*&quot;</span> |<span class="st"> </span>qsub -sync y -cwd -j y</code></pre></div>
<p>You may need to replace <code>module load R</code> with a command to load a specific version of R. <a href="https://slurm.schedmd.com/">SLURM</a> users can just point to <code>srun</code> and dispense with <code>shell.sh</code> altogether.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">make</span>(my_plan, <span class="dt">parallelism =</span> <span class="st">&quot;Makefile&quot;</span>, <span class="dt">jobs =</span> <span class="dv">4</span>,
  <span class="dt">prepend =</span> <span class="st">&quot;SHELL=srun&quot;</span>)</code></pre></div>
<p>For long projects, put your call to <code>make()</code> in an R script (say, <code>script.R</code>) and run it from the <a href="https://www.howtogeek.com/140679/beginner-geek-how-to-start-using-the-linux-terminal/">Linux terminal</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nohup nice -<span class="dv">19</span> R CMD BATCH script.R &amp;</code></pre></div>
<p>Even after you log out, a background process will keep running on the login node and submit new jobs at the appropriate time. Jobs are only submitted if the targets need to be (re)built.</p>
<div id="important-notes-on-makefile-level-parallelism" class="section level2">
<h2>Important notes on Makefile-level parallelism</h2>
<p>Makefile-level parallelism is only used for targets in your workflow plan data frame, not imports. To process imported objects and files, drake selects the best parallel backend for your system and uses the number of jobs you give to the <code>jobs</code> argument to <code>make()</code>. To use at most 2 jobs for imports and at most 4 jobs for targets, run</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">make</span>(..., <span class="dt">parallelism =</span> <span class="st">&quot;Makefile&quot;</span>, <span class="dt">jobs =</span> <span class="dv">2</span>, <span class="dt">args =</span> <span class="st">&quot;--jobs=4&quot;</span>)</code></pre></div>
<p>The <a href="http://kbroman.org/minimal_make/">Makefile</a> generated by <code>make(plan, parallelism = &quot;Makefile&quot;)</code> is not standalone. Do not run it outside of <code>drake::make()</code>. Drake uses dummy timestamp files to tell the <a href="http://kbroman.org/minimal_make/">Makefile</a> which targets can be skipped and which need to be (re)built, so running <code>make</code> in the <a href="https://www.howtogeek.com/140679/beginner-geek-how-to-start-using-the-linux-terminal/">terminal</a> will most likely give incorrect results.</p>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
